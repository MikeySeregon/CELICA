<!DOCTYPE html>
<html lang="es">
<head>
	<meta charset="UTF-8">
	<title>Cambiar Contraseña | CELICA</title>

	<!-- Bootstrap CSS -->
	<link
		href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
		rel="stylesheet">

</head>
<body class="bg-light">
<input type="password" id="password" placeholder="Nueva contraseña">
<input type="password" id="password2" placeholder="Confirmar contraseña">
<button id="btnUpdate">Actualizar contraseña</button>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

<script>
    import { supabase } from '../assets/js/auth.js';

    const btn = document.getElementById('btnUpdate');

    btn.addEventListener('click', async () => {
        const pass1 = document.getElementById('password').value;
        const pass2 = document.getElementById('password2').value;

        if (pass1 !== pass2) {
            alert('Las contraseñas no coinciden');
            return;
        }

        const { error } = await supabase.auth.updateUser({
            password: pass1
        });

        if (error) {
            alert(error.message);
        } else {
            alert('Contraseña actualizada correctamente');
            window.location.href = 'login.html';
        }
    });
</script>
    <!-- Auth -->
	<script type="module" src="../assets/js/auth.js"></script>
</body>
</html>