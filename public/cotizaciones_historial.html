<!DOCTYPE html>
<html lang="es">
<head>
	<meta charset="UTF-8">
	<title>Historial de Cotizaciones | CELICA</title>

	<!-- Bootstrap -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet">

	<!-- DataTables -->
	<link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/dataTables.bootstrap5.min.css">
	<link rel="stylesheet" href="https://cdn.datatables.net/responsive/2.5.0/css/responsive.bootstrap5.min.css">

	<style>
		table th, table td {
			vertical-align: middle;
			text-align: center;
		}
	</style>
</head>
<body>

	<mi-header></mi-header>

	<div class="container mt-4">
		<div class="d-flex justify-content-between align-items-center mb-3">
			<h2>Historial de Cotizaciones</h2>
			<a href="cotizaciones.html" class="btn btn-success">
				+ Nueva Cotizaci贸n
			</a>
		</div>

		<table id="tablaCotizaciones" class="table table-striped table-bordered nowrap w-100">
			<thead class="table-light">
				<tr>
					<th>ID</th>
					<th>Cliente</th>
					<th>Fecha</th>
					<th>Estado</th>
					<th>Total</th>
					<th>Acciones</th>
				</tr>
			</thead>
			<tbody>
				<!-- Se llena por JS -->
			</tbody>
		</table>
	</div>

	<!-- ================= MODAL DETALLE ================= -->
	<div class="modal fade" id="modalDetalleCotizacion" tabindex="-1" aria-hidden="true">
		<div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title">Detalle de Cotizaci贸n</h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal"></button>
				</div>

				<div class="modal-body">
					<div class="mb-3">
						<strong>Cliente:</strong>
						<span id="detalleCliente"></span>
					</div>
					<div class="mb-3">
						<strong>Fecha:</strong>
						<span id="detalleFecha"></span>
					</div>

					<table class="table table-sm table-bordered">
						<thead class="table-light">
							<tr>
								<th>Cant.</th>
								<th>Descripci贸n</th>
								<th>Precio</th>
								<th>Total</th>
							</tr>
						</thead>
						<tbody id="detalleLineas">
							<!-- JS -->
						</tbody>
					</table>

					<div class="text-end mt-3">
						<div>Subtotal: <strong><span id="detalleSubtotal">0.00</span></strong></div>
						<div>ISV 15%: <strong><span id="detalleIsv">0.00</span></strong></div>
						<div>Total: <strong><span id="detalleTotal">0.00</span></strong></div>
					</div>
				</div>

				<div class="modal-footer">
					<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
						Cerrar
					</button>
				</div>
			</div>
		</div>
	</div>

	<mi-footer></mi-footer>

	<!-- Bootstrap -->
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

	<!-- DataTables -->
	<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
	<script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
	<script src="https://cdn.datatables.net/1.13.6/js/dataTables.bootstrap5.min.js"></script>
	<script src="https://cdn.datatables.net/responsive/2.5.0/js/dataTables.responsive.min.js"></script>
	<script src="https://cdn.datatables.net/responsive/2.5.0/js/responsive.bootstrap5.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.29/jspdf.plugin.autotable.min.js"></script>

	<!-- Supabase -->
	<script type="module" src="../assets/js/supabase.js"></script>

	<!-- L贸gica del historial -->
	<script type="module" src="../assets/js/cotizaciones_historial.js"></script>

</body>
</html>